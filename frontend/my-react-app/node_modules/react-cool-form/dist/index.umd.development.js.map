{"version":3,"file":"index.umd.development.js","sources":["../node_modules/dequal/lite/index.mjs","../src/shared.ts","../src/hooks/useLatest.ts","../src/utils/arrayToMap.ts","../src/utils/isFileList.ts","../src/utils/isObject.ts","../src/utils/cloneObject.ts","../src/utils/compact.ts","../src/utils/isPlainObject.ts","../src/utils/deepMerge.ts","../src/utils/isUndefined.ts","../src/utils/filterErrors.ts","../src/utils/stringToPath.ts","../src/utils/get.ts","../src/utils/getIsDirty.ts","../src/utils/getPath.ts","../src/utils/invariant.ts","../src/utils/isFunction.ts","../src/utils/isAsyncFunction.ts","../src/utils/isCheckboxInput.ts","../src/utils/isEmptyObject.ts","../src/utils/isFieldArray.ts","../src/utils/isFieldElement.ts","../src/utils/isFileInput.ts","../src/utils/isInputElement.ts","../src/utils/isNumberInput.ts","../src/utils/isRadioInput.ts","../src/utils/isRangeInput.ts","../src/utils/isSelectMultiple.ts","../src/utils/isSelectOne.ts","../src/utils/parseState.ts","../src/utils/runWithLowPriority.ts","../src/utils/set.ts","../src/utils/setValuesAsTrue.ts","../src/utils/unset.ts","../src/utils/warn.ts","../src/hooks/useState.ts","../src/useForm.ts","../src/useFormMethods.ts","../src/useFormState.ts","../src/useControlled.ts","../src/useFieldArray.ts"],"sourcesContent":["var has = Object.prototype.hasOwnProperty;\n\nexport function dequal(foo, bar) {\n\tvar ctor, len;\n\tif (foo === bar) return true;\n\n\tif (foo && bar && (ctor=foo.constructor) === bar.constructor) {\n\t\tif (ctor === Date) return foo.getTime() === bar.getTime();\n\t\tif (ctor === RegExp) return foo.toString() === bar.toString();\n\n\t\tif (ctor === Array) {\n\t\t\tif ((len=foo.length) === bar.length) {\n\t\t\t\twhile (len-- && dequal(foo[len], bar[len]));\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (!ctor || typeof foo === 'object') {\n\t\t\tlen = 0;\n\t\t\tfor (ctor in foo) {\n\t\t\t\tif (has.call(foo, ctor) && ++len && !has.call(bar, ctor)) return false;\n\t\t\t\tif (!(ctor in bar) || !dequal(foo[ctor], bar[ctor])) return false;\n\t\t\t}\n\t\t\treturn Object.keys(bar).length === len;\n\t\t}\n\t}\n\n\treturn foo !== foo && bar !== bar;\n}\n","import { Methods, ObjMap } from \"./types\";\n\nlet one: Methods | undefined;\nconst all: ObjMap<Methods> = {};\n\nexport const get = (id?: string): Methods => (id ? all[id] : (one as Methods));\n\nexport const set = (id: string | undefined, methods: Methods): void => {\n  if (id) {\n    all[id] = methods;\n  } else {\n    one = methods;\n  }\n};\n\nexport const remove = (id?: string): void => {\n  if (id) {\n    delete all[id];\n  } else {\n    one = undefined;\n  }\n};\n","import { MutableRefObject, useRef } from \"react\";\n\nexport default <T>(val: T): MutableRefObject<T> => {\n  const ref = useRef(val);\n  ref.current = val;\n  return ref;\n};\n","import { ObjMap } from \"../types\";\n\nexport default (arr: any[], map: Record<string, string> = {}): ObjMap =>\n  arr.reduce((obj, key) => {\n    obj[map[key] || key] = true;\n    return obj;\n  }, {});\n","export default (value: unknown): value is FileList => value instanceof FileList;\n","export default (value: unknown): value is Object =>\n  value !== null && typeof value === \"object\";\n","import isFileList from \"./isFileList\";\nimport isObject from \"./isObject\";\n\nconst cloneObject = (object: unknown): any => {\n  if (object instanceof Event) throw new Error(\"Unable to clone event.\");\n\n  if (!isObject(object) || isFileList(object)) return object;\n\n  if (object instanceof Date) return new Date(object.getTime());\n\n  if (Array.isArray(object)) return object.map((val) => cloneObject(val));\n\n  return Object.keys(object).reduce((obj: Record<string, any>, key) => {\n    obj[key] = cloneObject((object as Record<string, any>)[key]);\n    return obj;\n  }, {});\n};\n\nexport default cloneObject;\n","export default (arr: any[]): any[] => arr.filter(Boolean);\n","import isObject from \"./isObject\";\n\nexport default (value: unknown): value is Object =>\n  !Array.isArray(value) && !(value instanceof Date) && isObject(value);\n","import isPlainObject from \"./isPlainObject\";\n\nconst deepMerge = (...objects: any[]): any =>\n  objects.reduce((prev, obj) => {\n    Object.keys(obj).forEach((key) => {\n      const prevValue = prev[key];\n      const currValue = obj[key];\n\n      if (Array.isArray(prevValue) && Array.isArray(currValue)) {\n        prev[key] = [...prevValue, ...currValue];\n      } else if (isPlainObject(prevValue) && isPlainObject(currValue)) {\n        prev[key] = deepMerge(prevValue, currValue);\n      } else {\n        prev[key] = currValue;\n      }\n    });\n\n    return prev;\n  }, {});\n\nexport default deepMerge;\n","export default (value: unknown): value is undefined => value === undefined;\n","import { ObjMap } from \"../types\";\nimport isPlainObject from \"./isPlainObject\";\nimport isUndefined from \"./isUndefined\";\n\nconst filterErrors = (error: unknown, touched: unknown): any => {\n  if (!isPlainObject(error)) return touched ? error : undefined;\n\n  return Object.keys(error).reduce((obj: ObjMap<any>, key) => {\n    const nextErrors = filterErrors(\n      (error as ObjMap<any>)[key],\n      (touched as ObjMap<any>)[key] || false\n    );\n\n    if (!isUndefined(nextErrors)) {\n      obj[key] = nextErrors;\n    } else {\n      delete obj[key];\n    }\n\n    return obj;\n  }, {});\n};\n\nexport default filterErrors;\n","import compact from \"./compact\";\n\nexport default (str: string): string[] => {\n  if (typeof str !== \"string\") throw new TypeError(\"Expected a string.\");\n  if (!str.length) return [];\n\n  return compact(str.split(/[.[\\]]+/));\n};\n","import isPlainObject from \"./isPlainObject\";\nimport isUndefined from \"./isUndefined\";\nimport stringToPath from \"./stringToPath\";\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport default (object: any, path: string, defaultValue?: unknown): any => {\n  if (!isPlainObject(object) || !path) return defaultValue;\n\n  const value = stringToPath(path).reduce(\n    (obj, key) => (obj || {})[key],\n    object\n  );\n\n  return !isUndefined(value) ? value : defaultValue;\n};\n","import isObject from \"./isObject\";\n\nexport default (dirty: object): boolean => {\n  const search = (dty: object, found: any[] = []) => {\n    for (const val of Object.values(dty)) {\n      if (val === true) {\n        found.push(val);\n        return found;\n      }\n\n      if (isObject(val)) search(val, found);\n    }\n\n    return found;\n  };\n\n  return !!search(dirty).length;\n};\n","export default (path: string): string =>\n  ![\n    \"values\",\n    \"touched\",\n    \"errors\",\n    \"isDirty\",\n    \"dirty\",\n    \"isValidating\",\n    \"isValid\",\n    \"isSubmitting\",\n    \"isSubmitted\",\n    \"submitCount\",\n  ].some((key) => path.startsWith(key))\n    ? `values.${path}`\n    : path;\n","export default (condition: boolean, message: string): void => {\n  if (__DEV__ && condition) throw new Error(message);\n};\n","export default (value: unknown): value is Function =>\n  typeof value === \"function\";\n","import isFunction from \"./isFunction\";\n\nexport default (value: unknown): value is Promise<any> =>\n  isFunction(value) && value.constructor.name === \"AsyncFunction\";\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLInputElement =>\n  field.type === \"checkbox\";\n","import { ObjMap } from \"../types\";\nimport isPlainObject from \"./isPlainObject\";\n\nexport default (value: unknown): value is ObjMap<never> =>\n  isPlainObject(value) && !Object.keys(value).length;\n","import { FieldArray } from \"../types\";\n\nexport default (\n  fields: FieldArray,\n  name: string,\n  callback?: (key: string) => void\n): string | void => {\n  let fieldName;\n\n  Object.keys(fields).some((key) => {\n    if (name.startsWith(key)) {\n      fieldName = key;\n      if (callback) callback(key);\n      return true;\n    }\n    return false;\n  });\n\n  return fieldName;\n};\n","import { FieldElement } from \"../types\";\n\nexport default (element: HTMLElement): element is FieldElement =>\n  /INPUT|TEXTAREA|SELECT/.test(element.tagName);\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLInputElement =>\n  field.type === \"file\";\n","export default (element: HTMLElement): element is HTMLInputElement =>\n  element.tagName === \"INPUT\";\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLInputElement =>\n  field.type === \"number\";\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLInputElement =>\n  field.type === \"radio\";\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLInputElement =>\n  field.type === \"range\";\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLSelectElement =>\n  field.type === \"select-multiple\";\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLSelectElement =>\n  field.type === \"select-one\";\n","import { FormState, ObjMap, Path } from \"../types\";\nimport get from \"./get\";\nimport getPath from \"./getPath\";\nimport isPlainObject from \"./isPlainObject\";\n\nexport default (\n  path: Path | undefined,\n  state: FormState,\n  pathHandler = getPath,\n  stateHandler?: (path: string, state: any) => any,\n  isGetState?: boolean\n): any => {\n  if (!path) return isGetState ? state : undefined;\n\n  let parsedState;\n\n  if (Array.isArray(path)) {\n    parsedState = path.map((p) => {\n      p = pathHandler(p);\n      const value = get(state, p);\n      return stateHandler ? stateHandler(p, value) : value;\n    });\n  } else if (isPlainObject(path)) {\n    const paths = path as ObjMap<string>;\n    parsedState = Object.keys(paths).reduce((s: ObjMap<any>, key) => {\n      path = pathHandler(paths[key]);\n      const value = get(state, path);\n      s[key] = stateHandler ? stateHandler(path, value) : value;\n      return s;\n    }, {});\n  } else {\n    path = pathHandler(path);\n    const value = get(state, path);\n    parsedState = stateHandler ? stateHandler(path, value) : value;\n  }\n\n  return parsedState;\n};\n","export default (callback: (args: any) => any): any =>\n  (\n    window.requestIdleCallback ||\n    ((cb) => {\n      const start = Date.now();\n      return setTimeout(\n        () =>\n          cb({\n            didTimeout: false,\n            timeRemaining: /* istanbul ignore next */ () =>\n              Math.max(0, 50 - (Date.now() - start)),\n          }),\n        1\n      );\n    })\n  )(callback, { timeout: 2000 });\n","import cloneObject from \"./cloneObject\";\nimport isPlainObject from \"./isPlainObject\";\nimport stringToPath from \"./stringToPath\";\n\nexport default (\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n  object: any,\n  path: string,\n  value: unknown,\n  immutable?: boolean\n): any => {\n  if (!isPlainObject(object)) throw new TypeError(\"Expected an object.\");\n\n  const newObject = immutable ? cloneObject(object) : object;\n  const segs = stringToPath(path);\n\n  segs.slice(0, -1).reduce((obj, key, idx) => {\n    const nextIsNumber = !Number.isNaN(+segs[idx + 1]);\n    if (\n      (isPlainObject(obj[key]) && !nextIsNumber) ||\n      (Array.isArray(obj[key]) && nextIsNumber)\n    )\n      return obj[key];\n    obj[key] = nextIsNumber ? [] : {};\n    return obj[key];\n  }, newObject)[segs[segs.length - 1] || \"\"] = value;\n\n  return newObject;\n};\n","import isPlainObject from \"./isPlainObject\";\n\nconst setValuesAsTrue = (object: unknown): any => {\n  if (!Array.isArray(object) && !isPlainObject(object)) return true;\n\n  if (Array.isArray(object)) return object.map((val) => setValuesAsTrue(val));\n\n  return Object.keys(object).reduce((obj: Record<string, any>, key) => {\n    obj[key] = setValuesAsTrue((object as Record<string, any>)[key]);\n    return obj;\n  }, {});\n};\n\nexport default setValuesAsTrue;\n","import cloneObject from \"./cloneObject\";\nimport isEmptyObject from \"./isEmptyObject\";\nimport isPlainObject from \"./isPlainObject\";\nimport isUndefined from \"./isUndefined\";\nimport stringToPath from \"./stringToPath\";\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nconst unset = (object: any, path: string, immutable?: boolean): any => {\n  if (!isPlainObject(object)) throw new TypeError(\"Expected an object.\");\n\n  const refObject = immutable ? cloneObject(object) : object;\n  const newObject = refObject;\n\n  // eslint-disable-next-line no-prototype-builtins\n  if (newObject.hasOwnProperty(path)) {\n    delete newObject[path];\n    return refObject;\n  }\n\n  const segs = stringToPath(path);\n\n  if (!segs.length) return refObject;\n\n  const last = segs.pop() as string;\n  const target = segs.reduce((obj, key) => (obj || {})[key], newObject);\n\n  if (Array.isArray(target)) {\n    let index = +last;\n\n    if (index < target.length - 1) {\n      delete target[index];\n    } else {\n      while (index >= 0) {\n        // @ts-expect-error\n        if (index == last || isUndefined(target[index])) {\n          target.splice(index, 1);\n          index -= 1;\n        } else {\n          break;\n        }\n      }\n    }\n  } else if (isPlainObject(target)) {\n    delete target[last];\n  }\n\n  return isEmptyObject(target) ||\n    (Array.isArray(target) && !target.filter((t) => !isUndefined(t)).length)\n    ? unset(refObject, segs.join(\".\"))\n    : refObject;\n};\n\nexport default unset;\n","export default (...args: any[]): void => {\n  if (__DEV__) console.warn(...args);\n};\n","import { useReducer, useRef, useCallback } from \"react\";\nimport { dequal } from \"dequal/lite\";\n\nimport {\n  FormState,\n  FormStateReturn,\n  Observer,\n  OnStateChange,\n  SetStateRef,\n} from \"../types\";\nimport useLatest from \"./useLatest\";\nimport { get, getIsDirty, isEmptyObject, set } from \"../utils\";\n\nexport default <V>(\n  initialState: FormState<V>,\n  onChange?: OnStateChange<V>\n): FormStateReturn<V> => {\n  const [, forceUpdate] = useReducer((c) => c + 1, 0);\n  const stateRef = useRef(initialState);\n  const observersRef = useRef<Observer<V>[]>([\n    { usedState: {}, notify: forceUpdate },\n  ]);\n  const onChangeRef = useLatest(onChange || (() => undefined));\n\n  const setStateRef = useCallback<SetStateRef>(\n    (path, value, { fieldPath, shouldSkipUpdate, shouldForceUpdate } = {}) => {\n      const key = path.split(\".\")[0];\n\n      if (!key) {\n        if (!dequal(stateRef.current, value)) {\n          stateRef.current = value;\n          onChangeRef.current(stateRef.current);\n\n          observersRef.current.forEach(\n            ({ usedState, notify }) =>\n              !isEmptyObject(usedState) && notify(stateRef.current)\n          );\n        }\n\n        return;\n      }\n\n      if (\n        (path !== \"values\" && key === \"values\") ||\n        !dequal(get(stateRef.current, path), value)\n      ) {\n        const state = set(stateRef.current, path, value, true);\n        const {\n          errors,\n          dirty,\n          isDirty: prevIsDirty,\n          isValid: prevIsValid,\n          submitCount: prevSubmitCount,\n        } = state;\n        let { submitCount: currSubmitCount } = state;\n        const isDirty = key === \"dirty\" ? getIsDirty(dirty) : prevIsDirty;\n        const isValid = key === \"errors\" ? isEmptyObject(errors) : prevIsValid;\n        const submitCount =\n          key === \"isSubmitting\" && value\n            ? (currSubmitCount += 1)\n            : currSubmitCount;\n\n        stateRef.current = { ...state, isDirty, isValid, submitCount };\n        onChangeRef.current(stateRef.current);\n\n        if (shouldSkipUpdate) return;\n\n        path = fieldPath || path;\n        observersRef.current.forEach(\n          ({ usedState, notify }) =>\n            (shouldForceUpdate ||\n              Object.keys(usedState).some(\n                (k) => path.startsWith(k) || k.startsWith(path)\n              ) ||\n              (usedState.isDirty && isDirty !== prevIsDirty) ||\n              (usedState.isValid && isValid !== prevIsValid) ||\n              (usedState.submitCount && submitCount !== prevSubmitCount)) &&\n            notify(stateRef.current)\n        );\n      }\n    },\n    [onChangeRef]\n  );\n\n  return { stateRef, setStateRef, observersRef };\n};\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { useCallback, useEffect, useRef } from \"react\";\nimport { dequal } from \"dequal/lite\";\n\nimport * as shared from \"./shared\";\nimport {\n  ClearErrors,\n  FieldArray,\n  FieldElement,\n  Fields,\n  FieldValidator,\n  Focus,\n  FormConfig,\n  FormErrors,\n  FormMethods,\n  FormState,\n  FormValues,\n  GetFormState,\n  GetNodeValue,\n  GetState,\n  HandleChangeEvent,\n  Handlers,\n  ObjMap,\n  Parsers,\n  RegisterField,\n  RegisterForm,\n  RemoveField,\n  Reset,\n  RunValidation,\n  SetDefaultValue,\n  SetDirty,\n  SetError,\n  SetNodesOrValues,\n  SetTouched,\n  SetTouchedMaybeValidate,\n  SetValue,\n  ShouldRemoveField,\n  Submit,\n  Use,\n} from \"./types\";\nimport { useLatest, useState } from \"./hooks\";\nimport {\n  arrayToMap,\n  compact,\n  deepMerge,\n  filterErrors,\n  get,\n  getPath,\n  isAsyncFunction,\n  isCheckboxInput,\n  isEmptyObject,\n  isFieldArray,\n  isFieldElement,\n  isFileInput,\n  isFileList,\n  isFunction,\n  isInputElement,\n  isNumberInput,\n  isPlainObject,\n  isRadioInput,\n  isRangeInput,\n  isSelectMultiple,\n  isSelectOne,\n  isUndefined,\n  parseState,\n  runWithLowPriority,\n  set,\n  unset,\n  warn,\n} from \"./utils\";\n\nexport default <V extends FormValues = FormValues>({\n  id,\n  defaultValues = {} as V,\n  validate,\n  validateOnChange = true,\n  validateOnBlur = true,\n  focusOnError = true,\n  removeOnUnmounted = true,\n  builtInValidationMode = \"message\",\n  excludeFields = [],\n  onReset,\n  onSubmit,\n  onError,\n  onStateChange,\n}: FormConfig<V> = {}): FormMethods<V> => {\n  const handlersRef = useRef<Handlers>({});\n  const mutationObserverRef = useRef<MutationObserver>();\n  const formRef = useRef<HTMLElement>();\n  const fieldsRef = useRef<Fields>(new Map());\n  const fieldParsersRef = useRef<Parsers>({});\n  const fieldArrayRef = useRef<FieldArray>({});\n  const controlsRef = useRef<ObjMap>({});\n  const formValidatorRef = useLatest(validate);\n  const fieldValidatorsRef = useRef<ObjMap<FieldValidator<V>>>({});\n  const changedFieldRef = useRef<string>();\n  const excludeFieldsRef = useRef<ObjMap>(arrayToMap(excludeFields));\n  const onResetRef = useLatest(onReset || (() => undefined));\n  const onSubmitRef = useLatest(onSubmit || (() => undefined));\n  const onErrorRef = useLatest(onError || (() => undefined));\n  const hasWarnValues = useRef(false);\n  const initialStateRef = useRef<FormState<V>>({\n    values: defaultValues,\n    touched: {},\n    errors: {},\n    isDirty: false,\n    dirty: {},\n    isValidating: false,\n    isValid: true,\n    isSubmitting: false,\n    isSubmitted: false,\n    submitCount: 0,\n  });\n  const { stateRef, setStateRef, observersRef } = useState<V>(\n    { ...initialStateRef.current },\n    onStateChange\n  );\n\n  const handleUnset = useCallback(\n    (\n      path: string,\n      options?: { shouldSkipUpdate?: boolean; shouldForceUpdate?: boolean }\n    ) => {\n      const segs = path.split(\".\");\n      const k = segs.shift() as string;\n      setStateRef(\n        k,\n        unset(stateRef.current[k as keyof FormState<V>], segs.join(\".\"), true),\n        { fieldPath: path, ...options }\n      );\n    },\n    [setStateRef, stateRef]\n  );\n\n  const handleFocus = useCallback((name: string) => {\n    const field =\n      fieldsRef.current.get(name)?.field ||\n      fieldsRef.current.get(\n        Array.from(fieldsRef.current.keys()).find((n) => n.startsWith(name)) ||\n          \"\"\n      )?.field;\n\n    if (field && isFunction(field.focus)) field.focus();\n  }, []);\n\n  const getFields = useCallback(\n    (form: HTMLElement) =>\n      Array.from(form.querySelectorAll(\"input,textarea,select\"))\n        .filter((element) => {\n          const field = element as FieldElement;\n          const {\n            type,\n            name,\n            id: fieldId,\n            classList,\n            dataset: { rcfExclude },\n          } = field;\n          const { current: exclude } = excludeFieldsRef;\n\n          if (\n            /button|image|submit|reset/.test(type) ||\n            (fieldId && exclude[`#${fieldId}`]) ||\n            Array.from(classList).find((n) => exclude[`.${n}`])\n          )\n            return false;\n\n          if (rcfExclude !== \"true\" && !name) {\n            warn(\n              'ðŸ’¡ react-cool-form > field: Missing \"name\" attribute. Do you want to exclude the field? See: https://react-cool-form.netlify.app/docs/api-reference/use-form/#excludefields'\n            );\n            return false;\n          }\n\n          return (\n            controlsRef.current[name] ||\n            (rcfExclude !== \"true\" && !exclude[name])\n          );\n        })\n        .reduce((acc, elm) => {\n          const field = elm as FieldElement;\n          const { name } = field;\n          const fieldArrayName = isFieldArray(fieldArrayRef.current, name);\n\n          if (fieldArrayName)\n            fieldArrayRef.current[fieldArrayName].fields[name] = true;\n\n          acc.set(name, {\n            ...acc.get(name),\n            field: acc.get(name)?.field || field,\n          });\n\n          if (isCheckboxInput(field) || isRadioInput(field)) {\n            acc.get(name).options = acc.get(name).options\n              ? [...acc.get(name).options, field]\n              : [field];\n          } else if (isSelectOne(field) || isSelectMultiple(field)) {\n            acc.get(name).options = Array.from(field.options);\n          }\n\n          return acc;\n        }, new Map()),\n    []\n  );\n\n  const getNodeValue = useCallback<GetNodeValue>(\n    (name, fields = fieldsRef.current) => {\n      if (!fields.has(name)) return undefined;\n\n      const { field, options } = fields.get(name)!;\n\n      if (isInputElement(field)) {\n        if (fieldParsersRef.current[name]?.valueAsNumber)\n          return field.valueAsNumber;\n        if (fieldParsersRef.current[name]?.valueAsDate)\n          return field.valueAsDate;\n      }\n\n      if (isNumberInput(field) || isRangeInput(field))\n        return field.valueAsNumber || \"\";\n\n      if (isCheckboxInput(field)) {\n        const checkboxes = options as HTMLInputElement[];\n\n        if (checkboxes.length > 1)\n          return checkboxes.filter((c) => c.checked).map((c) => c.value);\n\n        const checkbox = checkboxes[0];\n\n        if (checkbox.hasAttribute(\"value\") && checkbox.value)\n          return checkbox.checked ? [checkbox.value] : [];\n\n        return checkbox.checked;\n      }\n\n      if (isRadioInput(field))\n        return (\n          (options as HTMLInputElement[]).find((radio) => radio.checked)\n            ?.value || \"\"\n        );\n\n      if (isSelectMultiple(field))\n        return (options as HTMLOptionElement[])\n          .filter((option) => option.selected)\n          .map((option) => option.value);\n\n      if (isFileInput(field)) return field.files;\n\n      return field.value;\n    },\n    []\n  );\n\n  const setNodeValue = useCallback(\n    (name: string, value: any, fields: Fields = fieldsRef.current) => {\n      if (!fields.has(name) || controlsRef.current[name]) return;\n\n      const { field, options } = fields.get(name)!;\n\n      if (isCheckboxInput(field)) {\n        const checkboxes = options as HTMLInputElement[];\n\n        if (checkboxes.length > 1) {\n          checkboxes.forEach((checkbox) => {\n            checkbox.checked = Array.isArray(value)\n              ? value.includes(checkbox.value)\n              : !!value;\n          });\n        } else {\n          checkboxes[0].checked = !!value;\n        }\n      } else if (isRadioInput(field)) {\n        (options as HTMLInputElement[]).forEach((radio) => {\n          radio.checked = radio.value === value;\n        });\n      } else if (isSelectMultiple(field) && Array.isArray(value)) {\n        (options as HTMLOptionElement[]).forEach((option) => {\n          option.selected = !!value.includes(option.value);\n        });\n      } else if (isFileInput(field)) {\n        if (isFileList(value)) field.files = value;\n        if (!value) field.value = \"\";\n      } else {\n        field.value = value ?? \"\";\n      }\n    },\n    []\n  );\n\n  const setDefaultValue = useCallback<SetDefaultValue>(\n    (\n      name,\n      value,\n      shouldUpdateDefaultValue = !isFieldArray(fieldArrayRef.current, name) ||\n        !isUndefined(get(initialStateRef.current.values, name.split(\".\")[0]))\n    ) => {\n      if (shouldUpdateDefaultValue)\n        initialStateRef.current.values = set(\n          initialStateRef.current.values,\n          name,\n          value,\n          true\n        );\n\n      if (!dequal(get(stateRef.current.values, name), value))\n        setStateRef(`values.${name}`, value, { shouldSkipUpdate: true });\n    },\n    [setStateRef, stateRef]\n  );\n\n  const setNodesOrValues = useCallback<SetNodesOrValues<V>>(\n    (\n      values,\n      {\n        shouldSetValues = true,\n        fields = Array.from(fieldsRef.current.keys()),\n      } = {}\n    ) =>\n      fields.forEach((name) => {\n        if (controlsRef.current[name]) return;\n\n        const value = get(values, name);\n\n        if (!isUndefined(value)) setNodeValue(name, value);\n\n        if (shouldSetValues)\n          setDefaultValue(\n            name,\n            !isUndefined(value) ? value : getNodeValue(name)\n          );\n      }),\n    [getNodeValue, setDefaultValue, setNodeValue]\n  );\n\n  const setError = useCallback<SetError>(\n    (name, error) => {\n      error = isFunction(error)\n        ? error(get(stateRef.current.errors, name))\n        : error;\n\n      if (error) {\n        setStateRef(`errors.${name}`, error);\n      } else {\n        handleUnset(`errors.${name}`);\n      }\n    },\n    [handleUnset, setStateRef, stateRef]\n  );\n\n  const clearErrors = useCallback<ClearErrors>(\n    (name) => {\n      if (!name) {\n        setStateRef(\"errors\", {});\n      } else if (Array.isArray(name)) {\n        name.forEach((n) => setError(n));\n      } else {\n        setError(name);\n      }\n    },\n    [setError, setStateRef]\n  );\n\n  const runBuiltInValidation = useCallback(\n    (name: string) => {\n      if (builtInValidationMode === false || !fieldsRef.current.has(name))\n        return undefined;\n\n      const {\n        field: { validity, validationMessage },\n      } = fieldsRef.current.get(name)!;\n\n      if (builtInValidationMode === \"state\")\n        for (const k in validity)\n          if (k !== \"valid\" && validity[k as keyof ValidityState]) return k;\n\n      return validationMessage;\n    },\n    [builtInValidationMode]\n  );\n\n  const runAllBuiltInValidation = useCallback(() => {\n    if (builtInValidationMode === false) return {};\n\n    return Array.from(fieldsRef.current.keys()).reduce((errors, name) => {\n      const error = runBuiltInValidation(name);\n      errors = { ...errors, ...(error ? set(errors, name, error) : {}) };\n      return errors;\n    }, {});\n  }, [builtInValidationMode, runBuiltInValidation]);\n\n  const runFieldValidation = useCallback(\n    async (name: string): Promise<any> => {\n      const value = get(stateRef.current.values, name);\n\n      if (!fieldValidatorsRef.current[name] || isUndefined(value))\n        return undefined;\n\n      try {\n        const error = await fieldValidatorsRef.current[name](\n          value,\n          stateRef.current.values\n        );\n\n        return error;\n      } catch (exception) {\n        warn(`ðŸ’¡ react-cool-form > validate ${name}: `, exception);\n        throw exception;\n      }\n    },\n    [stateRef]\n  );\n\n  const runAllFieldsValidation = useCallback((): Promise<FormErrors<V>> => {\n    const promises = Object.keys(fieldValidatorsRef.current).map((name) =>\n      runFieldValidation(name)\n    );\n\n    return Promise.all(promises).then((errors) =>\n      Object.keys(fieldValidatorsRef.current).reduce((acc, cur, idx) => {\n        acc = { ...acc, ...(errors[idx] ? set(acc, cur, errors[idx]) : {}) };\n        return acc;\n      }, {})\n    );\n  }, [runFieldValidation]);\n\n  const runFormValidation = useCallback(\n    async (name?: string): Promise<any> => {\n      if (!formValidatorRef.current) return name ? undefined : {};\n\n      try {\n        const errors = await formValidatorRef.current(stateRef.current.values);\n\n        if (name) return get(errors, name);\n\n        return isPlainObject(errors) ? errors : {};\n      } catch (exception) {\n        warn(`ðŸ’¡ react-cool-form > validate form: `, exception);\n        throw exception;\n      }\n    },\n    [formValidatorRef, stateRef]\n  );\n\n  const validateField = useCallback(\n    async (name: string) => {\n      const hasAsyncValidator =\n        isAsyncFunction(formValidatorRef.current) ||\n        isAsyncFunction(fieldValidatorsRef.current[name]);\n\n      if (hasAsyncValidator) setStateRef(\"isValidating\", true);\n\n      try {\n        const error =\n          (await runFormValidation(name)) ||\n          (await runFieldValidation(name)) ||\n          runBuiltInValidation(name);\n\n        setError(name, error);\n        if (hasAsyncValidator) setStateRef(\"isValidating\", false);\n\n        return error;\n      } catch (exception) {\n        return exception;\n      }\n    },\n    [\n      formValidatorRef,\n      runBuiltInValidation,\n      runFieldValidation,\n      runFormValidation,\n      setError,\n      setStateRef,\n    ]\n  );\n\n  const validateFieldWithLowPriority = useCallback<typeof validateField>(\n    (name) => runWithLowPriority(() => validateField(name)),\n    [validateField]\n  );\n\n  const validateForm = useCallback((): Promise<FormErrors<V>> => {\n    setStateRef(\"isValidating\", true);\n\n    return Promise.all([\n      runAllBuiltInValidation(),\n      runAllFieldsValidation(),\n      runFormValidation(),\n    ]).then((errors) => {\n      const errs = deepMerge(...errors);\n\n      setStateRef(\"errors\", errs);\n      setStateRef(\"isValidating\", false);\n\n      return errs;\n    });\n  }, [\n    runAllBuiltInValidation,\n    runAllFieldsValidation,\n    runFormValidation,\n    setStateRef,\n  ]);\n\n  const runValidation = useCallback<RunValidation>(\n    (name, { shouldFocus = focusOnError } = {}) => {\n      let names: string[] = [];\n\n      if (shouldFocus) {\n        names = Array.isArray(shouldFocus)\n          ? shouldFocus\n          : Array.from(fieldsRef.current.keys());\n        names = isFunction(shouldFocus) ? shouldFocus(names) : names;\n      }\n\n      if (!name)\n        return validateForm().then((errors) => {\n          if (shouldFocus) {\n            const fieldName = names.find((n) => get(errors, n));\n            if (fieldName) handleFocus(fieldName);\n          }\n\n          return isEmptyObject(errors);\n        });\n\n      if (Array.isArray(name))\n        return Promise.all(name.map((n) => validateField(n))).then((errors) => {\n          if (shouldFocus) {\n            const fieldName = names.find((n) => !!errors[name.indexOf(n)]);\n            if (fieldName) handleFocus(fieldName);\n          }\n\n          return !compact(errors).length;\n        });\n\n      return validateField(name).then((error) => {\n        if (shouldFocus && error && names.includes(name)) handleFocus(name);\n\n        return !error;\n      });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [handleFocus, validateField, validateForm]\n  );\n\n  const getFormState = useCallback<GetFormState<V>>(\n    (\n      path,\n      {\n        errorWithTouched,\n        defaultValues: dfValues = {},\n        methodName = \"getState\",\n        callback,\n      } = {}\n    ) => {\n      const usedState: ObjMap = {};\n      const state = parseState(\n        path,\n        stateRef.current,\n        (p) => {\n          p = getPath(p);\n\n          if (methodName !== \"getState\") {\n            if (\n              p === \"values\" &&\n              methodName !== \"useFormStateCallback\" &&\n              !hasWarnValues.current\n            ) {\n              warn(\n                `ðŸ’¡ react-cool-form > ${methodName}: Getting \"values\" alone might cause unnecessary re-renders. If you know what you're doing, just ignore this warning. See: https://react-cool-form.netlify.app/docs/getting-started/form-state#best-practices`\n              );\n              hasWarnValues.current = true;\n            }\n\n            usedState[p] = true;\n          }\n\n          return p;\n        },\n        (p, v) => {\n          if (methodName === \"getState\") return v;\n\n          if (p.startsWith(\"values\")) {\n            if (!isUndefined(v)) return v;\n\n            p = p.replace(\"values.\", \"\");\n            v = get(initialStateRef.current, p);\n\n            return !isUndefined(v) ? v : get(dfValues, p);\n          }\n\n          if (!errorWithTouched || !p.startsWith(\"errors\")) return v;\n\n          p = p.replace(\"errors\", \"touched\");\n          usedState[p] = true;\n\n          return filterErrors(v, get(stateRef.current, p));\n        },\n        methodName === \"getState\"\n      );\n\n      if (callback) callback(usedState);\n\n      return state;\n    },\n    [stateRef]\n  );\n\n  const focus = useCallback<Focus>(\n    (name, delay) => {\n      if (!isUndefined(delay)) {\n        setTimeout(() => handleFocus(name), delay);\n      } else {\n        handleFocus(name);\n      }\n    },\n    [handleFocus]\n  );\n\n  const use = useCallback<Use<V>>(\n    (path, { errorWithTouched, defaultValues: dfValues } = {}) =>\n      getFormState(path, {\n        errorWithTouched,\n        defaultValues: dfValues,\n        methodName: \"use\",\n        callback: (usedState) => {\n          observersRef.current[0].usedState = {\n            ...observersRef.current[0].usedState,\n            ...usedState,\n          };\n        },\n      }),\n    [getFormState, observersRef]\n  );\n\n  const getState = useCallback<GetState>(\n    (path) => getFormState(path),\n    [getFormState]\n  );\n\n  const setTouched = useCallback<SetTouched>(\n    (name, isTouched = true, { shouldValidate = validateOnBlur } = {}) => {\n      if (isTouched) {\n        setStateRef(`touched.${name}`, true);\n      } else {\n        handleUnset(`touched.${name}`);\n      }\n\n      if (shouldValidate) validateFieldWithLowPriority(name);\n    },\n    [handleUnset, setStateRef, validateFieldWithLowPriority, validateOnBlur]\n  );\n\n  const setTouchedMaybeValidate = useCallback<SetTouchedMaybeValidate>(\n    (name) =>\n      setTouched(name, true, {\n        shouldValidate: validateOnChange\n          ? name !== changedFieldRef.current\n          : undefined,\n      }),\n    [setTouched, validateOnChange]\n  );\n\n  const setDirty = useCallback<SetDirty>(\n    (name, isDirty = true) => {\n      if (isDirty) {\n        setStateRef(`dirty.${name}`, true);\n      } else {\n        handleUnset(`dirty.${name}`);\n      }\n    },\n    [handleUnset, setStateRef]\n  );\n\n  const setDirtyIfNeeded = useCallback(\n    (name: string) =>\n      setDirty(\n        name,\n        !dequal(\n          get(stateRef.current.values, name),\n          get(initialStateRef.current.values, name)\n        )\n      ),\n    [setDirty, stateRef]\n  );\n\n  const setValue = useCallback<SetValue>(\n    (\n      name,\n      value,\n      {\n        shouldValidate = validateOnChange,\n        shouldTouched = true,\n        shouldDirty = true,\n      } = {}\n    ) => {\n      value = isFunction(value)\n        ? value(get(stateRef.current.values, name))\n        : value;\n\n      if (!isUndefined(value)) {\n        setStateRef(`values.${name}`, value);\n      } else {\n        handleUnset(`values.${name}`);\n      }\n      setNodeValue(name, value);\n\n      isFieldArray(fieldArrayRef.current, name, (key) =>\n        fieldArrayRef.current[key].reset()\n      );\n\n      if (shouldTouched) setTouched(name, true, { shouldValidate: false });\n      if (shouldDirty) setDirtyIfNeeded(name);\n      if (shouldValidate) validateFieldWithLowPriority(name);\n    },\n    [\n      handleUnset,\n      setDirtyIfNeeded,\n      setNodeValue,\n      setStateRef,\n      setTouched,\n      stateRef,\n      validateFieldWithLowPriority,\n      validateOnChange,\n    ]\n  );\n\n  const getOptions = useCallback(\n    () => ({\n      getState,\n      setValue,\n      setTouched,\n      setDirty,\n      setError,\n      clearErrors,\n      runValidation,\n      removeField,\n      focus,\n      reset,\n      submit,\n    }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  const reset: Reset<V> = useCallback(\n    (values, exclude, e) => {\n      if (e?.preventDefault) e.preventDefault();\n      if (e?.stopPropagation) e.stopPropagation();\n\n      const state = { ...stateRef.current };\n      const skip = arrayToMap(exclude || []);\n\n      Object.keys(state).forEach((key) => {\n        if (skip[key]) return;\n\n        if (key === \"values\") {\n          const nextValues =\n            (isFunction(values) ? values(stateRef.current.values) : values) ||\n            initialStateRef.current.values;\n\n          state[key] = nextValues;\n          initialStateRef.current.values = nextValues;\n          setNodesOrValues(nextValues, {\n            shouldSetValues: false,\n            fields: Array.from(fieldsRef.current.keys()).filter(\n              (name) => !isFieldArray(fieldArrayRef.current, name)\n            ),\n          });\n        } else {\n          // @ts-expect-error\n          state[key] = initialStateRef.current[key];\n        }\n      });\n\n      setStateRef(\"\", state);\n      onResetRef.current(state.values, getOptions(), e);\n\n      Object.values(fieldArrayRef.current).forEach((field) => field.reset());\n    },\n    [getOptions, onResetRef, setNodesOrValues, setStateRef, stateRef]\n  );\n\n  const submit: Submit<V> = useCallback(\n    async (e) => {\n      if (e?.preventDefault) e.preventDefault();\n      if (e?.stopPropagation) e.stopPropagation();\n\n      const nextTouched = [\n        ...Array.from(fieldsRef.current.keys()),\n        ...Object.keys(controlsRef.current),\n      ].reduce((touched, name) => {\n        touched = set(touched, name, true, true);\n        return touched;\n      }, stateRef.current.touched);\n\n      setStateRef(\"touched\", nextTouched);\n      setStateRef(\"isSubmitted\", false);\n      setStateRef(\"isSubmitting\", true);\n\n      try {\n        const isValid = await runValidation();\n\n        if (!isValid) {\n          const { errors } = stateRef.current;\n          onErrorRef.current(errors, getOptions(), e);\n          return { errors };\n        }\n\n        await onSubmitRef.current(stateRef.current.values, getOptions(), e);\n        setStateRef(\"isSubmitted\", true);\n\n        return { values: stateRef.current.values };\n      } catch (exception) {\n        warn(`ðŸ’¡ react-cool-form > submit: `, exception);\n        throw exception;\n      } finally {\n        setStateRef(\"isSubmitting\", false);\n      }\n    },\n    [getOptions, onErrorRef, onSubmitRef, runValidation, setStateRef, stateRef]\n  );\n\n  const handleChangeEvent = useCallback<HandleChangeEvent>(\n    (name, value) => {\n      setStateRef(`values.${name}`, value);\n      setDirtyIfNeeded(name);\n\n      if (validateOnChange) validateFieldWithLowPriority(name);\n    },\n    [\n      setDirtyIfNeeded,\n      setStateRef,\n      validateFieldWithLowPriority,\n      validateOnChange,\n    ]\n  );\n\n  const shouldRemoveField = useCallback<ShouldRemoveField>(\n    (name) => {\n      if (!removeOnUnmounted) return false;\n\n      let names = Array.isArray(removeOnUnmounted)\n        ? removeOnUnmounted\n        : [\n            ...Array.from(fieldsRef.current.keys()),\n            ...Object.keys(controlsRef.current),\n            ...Object.keys(fieldArrayRef.current),\n          ];\n      names = isFunction(removeOnUnmounted) ? removeOnUnmounted(names) : names;\n\n      return names.includes(name);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  const removeField = useCallback<RemoveField>(\n    (name, exclude) => {\n      const { defaultValue, ...rest } = arrayToMap(exclude || [], {\n        value: \"values\",\n        error: \"errors\",\n      });\n\n      if (!defaultValue)\n        initialStateRef.current.values = unset(\n          initialStateRef.current.values,\n          name,\n          true\n        );\n\n      [\"values\", \"touched\", \"dirty\", \"errors\"].forEach((key, idx, arr) => {\n        const shouldForceUpdate = idx === arr.length - 1;\n\n        if (\n          !rest[key] &&\n          !isUndefined(get(stateRef.current[key as keyof FormState<V>], name))\n        )\n          handleUnset(`${key}.${name}`, {\n            shouldSkipUpdate: !shouldForceUpdate,\n            shouldForceUpdate,\n          });\n      });\n\n      delete fieldParsersRef.current[name];\n      delete fieldValidatorsRef.current[name];\n      delete fieldArrayRef.current[name];\n      delete controlsRef.current[name];\n\n      if (fieldsRef.current.has(name)) fieldsRef.current.delete(name);\n    },\n    [handleUnset, stateRef]\n  );\n\n  const registerForm = useCallback<RegisterForm>(\n    (el) => {\n      if (!el) return;\n\n      formRef.current = el;\n      const form = formRef.current;\n\n      fieldsRef.current = getFields(form);\n      setNodesOrValues(initialStateRef.current.values);\n\n      handlersRef.current.change = ({ target }: Event) => {\n        const { name } = target as FieldElement;\n\n        if (fieldsRef.current.has(name) && !controlsRef.current[name]) {\n          const parse = fieldParsersRef.current[name]?.parse;\n          const value = getNodeValue(name);\n\n          handleChangeEvent(name, parse ? parse(value) : value);\n          changedFieldRef.current = name;\n        }\n      };\n\n      handlersRef.current.blur = ({ target }: Event) => {\n        if (!isFieldElement(target as HTMLElement)) return;\n\n        const { name } = target as FieldElement;\n\n        if (fieldsRef.current.has(name) && !controlsRef.current[name]) {\n          setTouchedMaybeValidate(name);\n          changedFieldRef.current = undefined;\n        }\n      };\n\n      handlersRef.current.submit = (e: Event) => submit(e as any);\n\n      handlersRef.current.reset = (e: Event) => reset(null, null, e as any);\n\n      form.addEventListener(\"input\", handlersRef.current.change);\n      form.addEventListener(\"focusout\", handlersRef.current.blur);\n      form.addEventListener(\"submit\", handlersRef.current.submit);\n      form.addEventListener(\"reset\", handlersRef.current.reset);\n\n      mutationObserverRef.current = new MutationObserver(([{ type }]) => {\n        if (type !== \"childList\") return;\n\n        const fields = getFields(form);\n        let { values } = initialStateRef.current;\n\n        fieldsRef.current.forEach((_, name) => {\n          if (!shouldRemoveField(name)) return;\n          if (controlsRef.current[name]) return;\n\n          if (!fields.has(name)) {\n            removeField(\n              name,\n              !isFieldArray(fieldArrayRef.current, name) ||\n                isUndefined(\n                  get(initialStateRef.current.values, name.split(\".\")[0])\n                )\n                ? undefined\n                : [\"defaultValue\"]\n            );\n\n            return;\n          }\n\n          const currOptions = fieldsRef.current.get(name)?.options\n            ?.length as number;\n          const nextOptions = fields.get(name).options?.length as number;\n\n          if (currOptions > nextOptions) {\n            setStateRef(`values.${name}`, getNodeValue(name, fields), {\n              shouldSkipUpdate: true,\n            });\n          } else if (currOptions < nextOptions) {\n            setNodeValue(name, get(values, name), fields);\n          }\n        });\n\n        const addedNodes: string[] = [];\n\n        fields.forEach((_, name) => {\n          if (fieldsRef.current.has(name) || controlsRef.current[name]) return;\n\n          const value = get(stateRef.current.values, name);\n          if (!isUndefined(value)) values = set(values, name, value, true);\n\n          addedNodes.push(name);\n        });\n\n        fieldsRef.current = fields;\n        if (addedNodes.length) setNodesOrValues(values, { fields: addedNodes });\n      });\n\n      mutationObserverRef.current.observe(form, {\n        childList: true,\n        subtree: true,\n      });\n    },\n    [\n      getFields,\n      getNodeValue,\n      handleChangeEvent,\n      removeField,\n      reset,\n      setNodeValue,\n      setNodesOrValues,\n      setStateRef,\n      setTouchedMaybeValidate,\n      shouldRemoveField,\n      stateRef,\n      submit,\n    ]\n  );\n\n  const registerField = useCallback<RegisterField<V>>(\n    (value) => (field) => {\n      if (\n        !field?.name ||\n        controlsRef.current[field.name] ||\n        excludeFieldsRef.current[field.name]\n      )\n        return;\n\n      if (isFunction(value)) {\n        fieldValidatorsRef.current[field.name] = value;\n        return;\n      }\n\n      const { validate: validator, ...parsers } = value;\n\n      if (validator) fieldValidatorsRef.current[field.name] = validator;\n      fieldParsersRef.current[field.name] = parsers;\n    },\n    []\n  );\n\n  shared.set(id, {\n    validateOnChange,\n    shouldRemoveField,\n    initialStateRef,\n    fieldArrayRef,\n    controlsRef,\n    observersRef,\n    fieldValidatorsRef,\n    changedFieldRef,\n    setStateRef,\n    getNodeValue,\n    getFormState,\n    setDefaultValue,\n    setNodesOrValues,\n    setTouchedMaybeValidate,\n    handleChangeEvent,\n    removeField,\n    form: registerForm,\n    field: registerField,\n    focus,\n    use,\n    getState,\n    setValue,\n    setTouched,\n    setDirty,\n    setError,\n    clearErrors,\n    runValidation,\n    reset,\n    submit,\n  });\n\n  useEffect(\n    () => () => {\n      if (formRef.current) {\n        const handlers = handlersRef.current as Required<Handlers>;\n\n        formRef.current.removeEventListener(\"input\", handlers.change);\n        formRef.current.removeEventListener(\"focusout\", handlers.blur);\n        formRef.current.removeEventListener(\"submit\", handlers.submit);\n        formRef.current.removeEventListener(\"reset\", handlers.reset);\n        mutationObserverRef.current?.disconnect();\n      }\n\n      shared.remove(id);\n    },\n    [id]\n  );\n\n  return {\n    form: registerForm,\n    field: registerField,\n    focus,\n    removeField,\n    use,\n    getState,\n    setValue,\n    setTouched,\n    setDirty,\n    setError,\n    clearErrors,\n    runValidation,\n    reset,\n    submit,\n  };\n};\n","import { FormMethods, FormValues, Methods } from \"./types\";\nimport { get } from \"./shared\";\nimport { invariant } from \"./utils\";\n\nexport default <V extends FormValues = FormValues>(\n  formId?: string\n): FormMethods<V> => {\n  const methods: Methods<V> = get(formId);\n\n  invariant(\n    !methods,\n    'ðŸ’¡ react-cool-form > useFormMethods: It must work with an \"useForm\" hook. See: https://react-cool-form.netlify.app/docs/api-reference/use-form'\n  );\n\n  const {\n    form,\n    field,\n    focus,\n    removeField,\n    use,\n    getState,\n    setValue,\n    setTouched,\n    setDirty,\n    setError,\n    clearErrors,\n    runValidation,\n    reset,\n    submit,\n  } = methods;\n\n  return {\n    form,\n    field,\n    focus,\n    removeField,\n    use,\n    getState,\n    setValue,\n    setTouched,\n    setDirty,\n    setError,\n    clearErrors,\n    runValidation,\n    reset,\n    submit,\n  };\n};\n","/* eslint-disable react-hooks/rules-of-hooks */\n\nimport { useEffect, useReducer, useRef } from \"react\";\n\nimport {\n  FormStateCallback,\n  FormStateConfig,\n  FormValues,\n  Methods,\n  Observer,\n  Path,\n} from \"./types\";\nimport { get } from \"./shared\";\nimport { invariant, isFunction, parseState } from \"./utils\";\n\nexport default <V extends FormValues = FormValues>(\n  path: Path,\n  configOrCallback: FormStateCallback | FormStateConfig<V>,\n  formId?: string\n): any => {\n  const config = !isFunction(configOrCallback) ? configOrCallback : {};\n  const methods: Methods<V> = get(config?.formId || formId);\n\n  invariant(\n    !methods,\n    `ðŸ’¡ react-cool-form > useFormState: It must work with an \"useForm\" hook. See: https://react-cool-form.netlify.app/docs/api-reference/use-form`\n  );\n\n  const observerRef = useRef<Observer<V>>();\n  const [, forceUpdate] = useReducer((c) => c + 1, 0);\n  const { observersRef, getFormState } = methods;\n  const callback = isFunction(configOrCallback) ? configOrCallback : undefined;\n\n  useEffect(() => {\n    observersRef.current.push(observerRef.current!);\n\n    return () => {\n      observersRef.current = observersRef.current.filter(\n        (o) => o !== observerRef.current\n      );\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return getFormState(path, {\n    ...config,\n    methodName: callback ? \"useFormStateCallback\" : \"useFormState\",\n    callback: (usedState) => {\n      if (!observerRef.current)\n        observerRef.current = {\n          usedState,\n          notify: callback\n            ? (state) => callback(parseState(path, state))\n            : forceUpdate,\n        };\n    },\n  });\n};\n","import { useEffect } from \"react\";\n\nimport {\n  ControlledConfig,\n  ControlledReturn,\n  FormValues,\n  Methods,\n} from \"./types\";\nimport * as shared from \"./shared\";\nimport {\n  get,\n  invariant,\n  isFieldArray,\n  isFieldElement,\n  isUndefined,\n  warn,\n} from \"./utils\";\nimport useFormState from \"./useFormState\";\n\nexport default <V extends FormValues = FormValues>(\n  name: string,\n  {\n    formId,\n    defaultValue,\n    validate,\n    parse,\n    format,\n    errorWithTouched,\n    ...props\n  }: ControlledConfig<V> = {}\n): ControlledReturn => {\n  const methods: Methods<V> = shared.get(formId);\n\n  invariant(\n    !methods,\n    'ðŸ’¡ react-cool-form > useControlled: It must work with an \"useForm\" hook. See: https://react-cool-form.netlify.app/docs/api-reference/use-form'\n  );\n\n  const meta = useFormState(\n    {\n      value: `values.${name}`,\n      error: `errors.${name}`,\n      isTouched: `touched.${name}`,\n      isDirty: `dirty.${name}`,\n    },\n    { formId, errorWithTouched }\n  );\n  const {\n    shouldRemoveField,\n    initialStateRef,\n    fieldArrayRef,\n    controlsRef,\n    fieldValidatorsRef,\n    changedFieldRef,\n    getState,\n    getNodeValue,\n    setDefaultValue,\n    setTouchedMaybeValidate,\n    handleChangeEvent,\n    removeField,\n  } = methods;\n\n  useEffect(\n    () => {\n      const isFieldArr = isFieldArray(fieldArrayRef.current, name);\n      const initialVal = get(initialStateRef.current.values, name);\n\n      if (isUndefined(initialVal)) {\n        if (\n          !isUndefined(defaultValue) &&\n          (!isFieldArr ||\n            !isUndefined(\n              get(initialStateRef.current.values, name.split(\".\")[0])\n            ))\n        ) {\n          setDefaultValue(name, defaultValue);\n        } else if (!isFieldArr) {\n          warn(\n            `ðŸ’¡ react-cool-form > useControlled: Please provide a default value for \"${name}\" field.`\n          );\n        }\n      } else if (isUndefined(getState(name))) {\n        setDefaultValue(name, initialVal);\n      }\n\n      return () => {\n        if (shouldRemoveField(name))\n          removeField(\n            name,\n            !isFieldArr ||\n              isUndefined(\n                // eslint-disable-next-line react-hooks/exhaustive-deps\n                get(initialStateRef.current.values, name.split(\".\")[0])\n              )\n              ? undefined\n              : [\"defaultValue\"]\n          );\n      };\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  controlsRef.current[name] = true;\n  if (validate) fieldValidatorsRef.current[name] = validate;\n\n  const { onChange, onBlur, ...restProps } = props;\n  let value = get(initialStateRef.current.values, name);\n  value = !isUndefined(value) ? value : defaultValue;\n  value = !isUndefined(meta.value) ? meta.value : value;\n  value = (format ? format(value) : value) ?? \"\";\n\n  return [\n    {\n      name,\n      value,\n      onChange: (...event) => {\n        let val;\n\n        if (parse) {\n          val = parse(...event);\n        } else {\n          const e = event[0];\n          val =\n            e?.nativeEvent instanceof Event && isFieldElement(e.target)\n              ? getNodeValue(name)\n              : e;\n        }\n\n        handleChangeEvent(name, val);\n        if (onChange) onChange(...event);\n        changedFieldRef.current = name;\n      },\n      onBlur: (e) => {\n        setTouchedMaybeValidate(name);\n        if (onBlur) onBlur(e);\n        changedFieldRef.current = undefined;\n      },\n      ...restProps,\n    },\n    { error: meta.error, isTouched: !!meta.isTouched, isDirty: !!meta.isDirty },\n  ];\n};\n","import { useCallback, useEffect, useState } from \"react\";\n\nimport {\n  FieldArrayConfig,\n  FieldArrayReturn,\n  FormValues,\n  Insert,\n  Keys,\n  Methods,\n  Move,\n  Push,\n  Remove,\n  StateHandler,\n  Swap,\n} from \"./types\";\nimport * as shared from \"./shared\";\nimport {\n  compact,\n  get,\n  getIsDirty,\n  invariant,\n  isUndefined,\n  set,\n  setValuesAsTrue,\n} from \"./utils\";\n\nexport default <T = any, V extends FormValues = FormValues>(\n  name: string,\n  { formId, defaultValue, validate }: FieldArrayConfig<T, V> = {}\n): FieldArrayReturn<T> => {\n  const methods: Methods<V> = shared.get(formId);\n\n  invariant(\n    !methods,\n    'ðŸ’¡ react-cool-form > useFieldArray: It must work with an \"useForm\" hook. See: https://react-cool-form.netlify.app/docs/api-reference/use-form'\n  );\n\n  const {\n    validateOnChange,\n    shouldRemoveField,\n    initialStateRef,\n    fieldArrayRef,\n    fieldValidatorsRef,\n    getState,\n    setDefaultValue,\n    setNodesOrValues,\n    setStateRef,\n    runValidation,\n    removeField,\n  } = methods;\n\n  const getFields = useCallback(\n    (init = false): string[] => {\n      let fields = getState(name);\n\n      if (init && isUndefined(fields)) fields = defaultValue;\n\n      return Array.isArray(fields)\n        ? fields.map((_, index) => `${name}[${index}]`)\n        : [];\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [getState, name]\n  );\n\n  const [fields, setFields] = useState<string[]>(getFields(true));\n\n  const updateFields = useCallback(() => {\n    setFields(getFields());\n    setNodesOrValues(getState(\"values\"), {\n      shouldSetValues: false,\n      fields: Object.keys(fieldArrayRef.current[name].fields),\n    });\n  }, [fieldArrayRef, getFields, getState, name, setNodesOrValues]);\n\n  useEffect(() => {\n    if (\n      isUndefined(get(initialStateRef.current.values, name)) &&\n      !isUndefined(defaultValue)\n    ) {\n      setDefaultValue(name, defaultValue, true);\n      updateFields();\n    }\n\n    return () => {\n      if (shouldRemoveField(name)) removeField(name);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (!fieldArrayRef.current[name])\n    fieldArrayRef.current[name] = {\n      reset: updateFields,\n      fields: {},\n    };\n  if (validate) fieldValidatorsRef.current[name] = validate;\n\n  const setState = useCallback(\n    (\n      handler: StateHandler,\n      {\n        shouldTouched,\n        shouldDirty,\n      }: { shouldTouched?: boolean; shouldDirty?: boolean } = {}\n    ) => {\n      let state = getState();\n\n      ([\"values\", \"touched\", \"errors\", \"dirty\"] as Keys[]).forEach((key) => {\n        const value = state[key][name];\n        const fieldsLength = state.values[name]?.length;\n\n        if (\n          key === \"values\" ||\n          (key === \"touched\" && shouldTouched) ||\n          (key === \"dirty\" && shouldDirty) ||\n          !isUndefined(value)\n        )\n          state = set(\n            state,\n            key,\n            {\n              ...state[key],\n              [name]: handler(\n                Array.isArray(value) ? [...value] : [],\n                key,\n                fieldsLength ? fieldsLength - 1 : 0\n              ),\n            },\n            true\n          );\n      });\n\n      setStateRef(\"\", { ...state, shouldDirty: getIsDirty(state.dirty) });\n      updateFields();\n\n      if (validateOnChange) runValidation(name);\n    },\n    [getState, name, runValidation, setStateRef, updateFields, validateOnChange]\n  );\n\n  const push = useCallback<Push<T>>(\n    (value, { shouldTouched, shouldDirty = true } = {}) => {\n      const handler: StateHandler = (f, type, lastIndex = 0) => {\n        if (type === \"values\") {\n          f.push(value);\n        } else if (\n          (type === \"touched\" && shouldTouched) ||\n          (type === \"dirty\" && shouldDirty)\n        ) {\n          f[lastIndex] = setValuesAsTrue(value);\n        }\n\n        return f;\n      };\n\n      setState(handler, { shouldTouched, shouldDirty });\n    },\n    [setState]\n  );\n\n  const insert = useCallback<Insert<T>>(\n    (index, value, { shouldTouched, shouldDirty = true } = {}) => {\n      const handler: StateHandler = (f, type) => {\n        if (type === \"values\") {\n          f.splice(index, 0, value);\n        } else if (\n          (type === \"touched\" && shouldTouched) ||\n          (type === \"dirty\" && shouldDirty)\n        ) {\n          f[index] = setValuesAsTrue(value);\n        } else if (index < f.length) {\n          f.splice(index, 0, undefined);\n        }\n\n        return f;\n      };\n\n      setState(handler, { shouldTouched, shouldDirty });\n    },\n    [setState]\n  );\n\n  const remove = useCallback<Remove<T>>(\n    (index) => {\n      const handler: StateHandler = (f) => {\n        f.splice(index, 1);\n        return compact(f).length ? f : [];\n      };\n      const value = (getState(name) || [])[index];\n\n      setState(handler);\n\n      return value;\n    },\n    [getState, name, setState]\n  );\n\n  const swap = useCallback<Swap>(\n    (indexA, indexB) => {\n      const handler: StateHandler = (f) => {\n        [f[indexA], f[indexB]] = [f[indexB], f[indexA]];\n        return f;\n      };\n\n      setState(handler);\n    },\n    [setState]\n  );\n\n  const move = useCallback<Move>(\n    (from, to) => {\n      const handler: StateHandler = (f) => {\n        f.splice(to, 0, f.splice(from, 1)[0]);\n        return f;\n      };\n\n      setState(handler);\n    },\n    [setState]\n  );\n\n  return [fields, { push, insert, remove, swap, move }];\n};\n"],"names":["one","all","get","id","set","methods","remove","undefined","val","ref","useRef","current","arr","map","reduce","obj","key","value","FileList","cloneObject","object","Event","Error","isObject","isFileList","Date","getTime","Array","isArray","Object","keys","filter","Boolean","deepMerge","objects","prev","forEach","prevValue","currValue","isPlainObject","filterErrors","error","touched","nextErrors","isUndefined","str","TypeError","length","compact","split","path","defaultValue","stringToPath","dirty","search","dty","found","values","push","some","startsWith","condition","message","__DEV__","isFunction","constructor","name","field","type","fields","callback","fieldName","element","test","tagName","state","pathHandler","stateHandler","isGetState","getPath","parsedState","p","paths","s","window","requestIdleCallback","cb","start","now","setTimeout","didTimeout","timeRemaining","Math","max","timeout","immutable","newObject","segs","slice","idx","nextIsNumber","Number","isNaN","setValuesAsTrue","unset","refObject","hasOwnProperty","last","pop","target","index","splice","isEmptyObject","t","join","console","warn","initialState","onChange","useReducer","c","forceUpdate","stateRef","observersRef","usedState","notify","onChangeRef","useLatest","setStateRef","useCallback","fieldPath","shouldSkipUpdate","shouldForceUpdate","dequal","errors","prevIsDirty","isDirty","prevIsValid","isValid","prevSubmitCount","submitCount","currSubmitCount","getIsDirty","k","defaultValues","validate","validateOnChange","validateOnBlur","focusOnError","removeOnUnmounted","builtInValidationMode","excludeFields","onReset","onSubmit","onError","onStateChange","handlersRef","mutationObserverRef","formRef","fieldsRef","Map","fieldParsersRef","fieldArrayRef","controlsRef","formValidatorRef","fieldValidatorsRef","changedFieldRef","excludeFieldsRef","arrayToMap","onResetRef","onSubmitRef","onErrorRef","hasWarnValues","initialStateRef","isValidating","isSubmitting","isSubmitted","useState","handleUnset","options","shift","handleFocus","from","find","n","focus","getFields","form","querySelectorAll","fieldId","classList","rcfExclude","dataset","exclude","acc","elm","fieldArrayName","isFieldArray","isCheckboxInput","isRadioInput","isSelectOne","isSelectMultiple","getNodeValue","has","isInputElement","valueAsNumber","valueAsDate","isNumberInput","isRangeInput","checkboxes","checked","checkbox","hasAttribute","radio","option","selected","isFileInput","files","setNodeValue","includes","setDefaultValue","shouldUpdateDefaultValue","setNodesOrValues","shouldSetValues","setError","clearErrors","runBuiltInValidation","validity","validationMessage","runAllBuiltInValidation","runFieldValidation","exception","runAllFieldsValidation","promises","Promise","then","cur","runFormValidation","validateField","hasAsyncValidator","isAsyncFunction","validateFieldWithLowPriority","runWithLowPriority","validateForm","errs","runValidation","shouldFocus","names","indexOf","getFormState","errorWithTouched","dfValues","methodName","parseState","v","replace","delay","use","getState","setTouched","isTouched","shouldValidate","setTouchedMaybeValidate","setDirty","setDirtyIfNeeded","setValue","shouldTouched","shouldDirty","reset","getOptions","removeField","submit","e","preventDefault","stopPropagation","skip","nextValues","nextTouched","handleChangeEvent","shouldRemoveField","rest","registerForm","el","change","parse","blur","isFieldElement","addEventListener","MutationObserver","_","currOptions","nextOptions","addedNodes","observe","childList","subtree","registerField","validator","parsers","shared","useEffect","handlers","removeEventListener","disconnect","formId","invariant","configOrCallback","config","observerRef","o","format","props","meta","useFormState","isFieldArr","initialVal","onBlur","restProps","nativeEvent","init","setFields","updateFields","setState","handler","fieldsLength","f","lastIndex","insert","swap","indexA","indexB","move","to"],"mappings":"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"}