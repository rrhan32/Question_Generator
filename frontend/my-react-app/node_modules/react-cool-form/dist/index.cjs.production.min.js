"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),r=require("@babel/runtime/helpers/extends"),t=require("react"),u=require("dequal/lite");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a,i=n(e),o=n(r),c={},l=function(e){return e?c[e]:a},s=function(e){var r=t.useRef(e);return r.current=e,r},f=function(e,r){return void 0===r&&(r={}),e.reduce((function(e,t){return e[r[t]||t]=!0,e}),{})},d=function(e){return e instanceof FileList},v=function(e){return null!==e&&"object"==typeof e},h=function e(r){if(r instanceof Event)throw Error("Unable to clone event.");return!v(r)||d(r)?r:r instanceof Date?new Date(r.getTime()):Array.isArray(r)?r.map((function(r){return e(r)})):Object.keys(r).reduce((function(t,u){return t[u]=e(r[u]),t}),{})},y=function(e){return e.filter(Boolean)},b=function(e){return!Array.isArray(e)&&!(e instanceof Date)&&v(e)},m=function e(){for(var r=arguments.length,t=Array(r),u=0;u<r;u++)t[u]=arguments[u];return t.reduce((function(r,t){return Object.keys(t).forEach((function(u){var n=r[u],a=t[u];Array.isArray(n)&&Array.isArray(a)?r[u]=[].concat(n,a):b(n)&&b(a)?r[u]=e(n,a):r[u]=a})),r}),{})},p=function(e){return void 0===e},g=function e(r,t){return b(r)?Object.keys(r).reduce((function(u,n){var a=e(r[n],t[n]||!1);return p(a)?delete u[n]:u[n]=a,u}),{}):t?r:void 0},k=function(e){if("string"!=typeof e)throw new TypeError("Expected a string.");return e.length?y(e.split(/[.[\]]+/)):[]},C=function(e,r,t){return b(e)&&r?(e=k(r).reduce((function(e,r){return(e||{})[r]}),e),p(e)?t:e):t},A=function(e){return!!function e(r,t){void 0===t&&(t=[]);var u=0;for(r=Object.values(r);u<r.length;u++){var n=r[u];if(!0===n){t.push(n);break}v(n)&&e(n,t)}return t}(e).length},E=function(e){return"values touched errors isDirty dirty isValidating isValid isSubmitting isSubmitted submitCount".split(" ").some((function(r){return e.startsWith(r)}))?e:"values."+e},V=function(e){return"function"==typeof e},S=function(e){return V(e)&&"AsyncFunction"===e.constructor.name},R=function(e){return"checkbox"===e.type},D=function(e){return b(e)&&!Object.keys(e).length},T=function(e,r,t){var u;return Object.keys(e).some((function(e){return!!r.startsWith(e)&&(u=e,t&&t(e),!0)})),u},O=function(e){return/INPUT|TEXTAREA|SELECT/.test(e.tagName)},F=function(e){return"file"===e.type},w=function(e){return"radio"===e.type},j=function(e){return"select-multiple"===e.type},x=function(e,r,t,u,n){if(void 0===t&&(t=E),!e)return n?r:void 0;if(Array.isArray(e))n=e.map((function(e){e=t(e);var n=C(r,e);return u?u(e,n):n}));else if(b(e)){var a=e;n=Object.keys(a).reduce((function(n,i){e=t(a[i]);var o=C(r,e);return n[i]=u?u(e,o):o,n}),{})}else e=t(e),n=C(r,e),n=u?u(e,n):n;return n},N=function(e,r,t,u){if(!b(e))throw new TypeError("Expected an object.");e=u?h(e):e;var n=k(r);return n.slice(0,-1).reduce((function(e,r,t){return t=!Number.isNaN(+n[t+1]),b(e[r])&&!t||Array.isArray(e[r])&&t||(e[r]=t?[]:{}),e[r]}),e)[n[n.length-1]||""]=t,e},L=function e(r){return!Array.isArray(r)&&!b(r)||(Array.isArray(r)?r.map((function(r){return e(r)})):Object.keys(r).reduce((function(t,u){return t[u]=e(r[u]),t}),{}))},P=function e(r,t,u){if(!b(r))throw new TypeError("Expected an object.");if((r=u?h(r):r).hasOwnProperty(t))return delete r[t],r;if(!(t=k(t)).length)return r;u=t.pop();var n=t.reduce((function(e,r){return(e||{})[r]}),r);if(Array.isArray(n)){var a=+u;if(a<n.length-1)delete n[a];else for(;0<=a&&(a==u||p(n[a]));)n.splice(a,1),--a}else b(n)&&delete n[u];return D(n)||Array.isArray(n)&&!n.filter((function(e){return!p(e)})).length?e(r,t.join(".")):r},W=["defaultValue"],q=["validate"],M=function(e,r,u){var n=V(r)?{}:r;u=l((null==n?void 0:n.formId)||u);var a=t.useRef(),i=t.useReducer((function(e){return e+1}),0)[1],c=u.observersRef;u=u.getFormState;var s=V(r)?r:void 0;return t.useEffect((function(){return c.current.push(a.current),function(){c.current=c.current.filter((function(e){return e!==a.current}))}}),[]),u(e,o.default({},n,{methodName:s?"useFormStateCallback":"useFormState",callback:function(r){a.current||(a.current={usedState:r,notify:s?function(r){return s(x(e,r))}:i})}}))},U="formId defaultValue validate parse format errorWithTouched".split(" "),I=["onChange","onBlur"];exports.get=C,exports.set=N,exports.unset=P,exports.useControlled=function(e,r){var u,n=void 0===r?{}:r,a=n.formId,c=n.defaultValue,s=n.validate,f=n.parse;r=n.format;var d=n.errorWithTouched;n=i.default(n,U);var v=l(a);a=M({value:"values."+e,error:"errors."+e,isTouched:"touched."+e,isDirty:"dirty."+e},{formId:a,errorWithTouched:d});var h=v.shouldRemoveField,y=v.initialStateRef,b=v.fieldArrayRef;d=v.controlsRef;var m=v.fieldValidatorsRef,g=v.changedFieldRef,k=v.getState,A=v.getNodeValue,E=v.setDefaultValue,V=v.setTouchedMaybeValidate,S=v.handleChangeEvent,R=v.removeField;t.useEffect((function(){var r=T(b.current,e),t=C(y.current.values,e);return p(t)?p(c)||r&&p(C(y.current.values,e.split(".")[0]))||E(e,c):p(k(e))&&E(e,t),function(){h(e)&&R(e,!r||p(C(y.current.values,e.split(".")[0]))?void 0:["defaultValue"])}}),[]),d.current[e]=!0,s&&(m.current[e]=s);var D=n.onChange,F=n.onBlur;return s=i.default(n,I),n=C(y.current.values,e),n=p(n)?c:n,n=p(a.value)?n:a.value,n=null!=(u=r?r(n):n)?u:"",[o.default({name:e,value:n,onChange:function(){if(f)var r=f.apply(void 0,arguments);else r=(null==(r=0>=arguments.length?void 0:arguments[0])?void 0:r.nativeEvent)instanceof Event&&O(r.target)?A(e):r;S(e,r),D&&D.apply(void 0,arguments),g.current=e},onBlur:function(r){V(e),F&&F(r),g.current=void 0}},s),{error:a.error,isTouched:!!a.isTouched,isDirty:!!a.isDirty}]},exports.useFieldArray=function(e,r){var u=(r=void 0===r?{}:r).defaultValue,n=r.validate,a=(r=l(r.formId)).validateOnChange,i=r.shouldRemoveField,c=r.initialStateRef,s=r.fieldArrayRef,f=r.fieldValidatorsRef,d=r.getState,v=r.setDefaultValue,h=r.setNodesOrValues,b=r.setStateRef,m=r.runValidation,g=r.removeField,k=t.useCallback((function(r){void 0===r&&(r=!1);var t=d(e);return r&&p(t)&&(t=u),Array.isArray(t)?t.map((function(r,t){return e+"["+t+"]"})):[]}),[d,e]),E=t.useState(k(!0));r=E[0];var V=E[1],S=t.useCallback((function(){V(k()),h(d("values"),{shouldSetValues:!1,fields:Object.keys(s.current[e].fields)})}),[s,k,d,e,h]);t.useEffect((function(){return p(C(c.current.values,e))&&!p(u)&&(v(e,u,!0),S()),function(){i(e)&&g(e)}}),[]),s.current[e]||(s.current[e]={reset:S,fields:{}}),n&&(f.current[e]=n);var R=t.useCallback((function(r,t){var u=(t=void 0===t?{}:t).shouldTouched,n=t.shouldDirty,i=d();["values","touched","errors","dirty"].forEach((function(t){var a,c,l=i[t][e],s=null==(a=i.values[e])?void 0:a.length;("values"===t||"touched"===t&&u||"dirty"===t&&n||!p(l))&&(i=N(i,t,o.default({},i[t],((c={})[e]=r(Array.isArray(l)?[].concat(l):[],t,s?s-1:0),c)),!0))})),b("",o.default({},i,{shouldDirty:A(i.dirty)})),S(),a&&m(e)}),[d,e,m,b,S,a]);n=t.useCallback((function(e,r){var t=(r=void 0===r?{}:r).shouldTouched,u=void 0===(r=r.shouldDirty)||r;R((function(r,n,a){return void 0===a&&(a=0),"values"===n?r.push(e):("touched"===n&&t||"dirty"===n&&u)&&(r[a]=L(e)),r}),{shouldTouched:t,shouldDirty:u})}),[R]),f=t.useCallback((function(e,r,t){var u=(t=void 0===t?{}:t).shouldTouched,n=void 0===(t=t.shouldDirty)||t;R((function(t,a){return"values"===a?t.splice(e,0,r):"touched"===a&&u||"dirty"===a&&n?t[e]=L(r):e<t.length&&t.splice(e,0,void 0),t}),{shouldTouched:u,shouldDirty:n})}),[R]),E=t.useCallback((function(r){var t=(d(e)||[])[r];return R((function(e){return e.splice(r,1),y(e).length?e:[]})),t}),[d,e,R]);var D=t.useCallback((function(e,r){R((function(t){var u=[t[r],t[e]];return t[e]=u[0],t[r]=u[1],t}))}),[R]),T=t.useCallback((function(e,r){R((function(t){return t.splice(r,0,t.splice(e,1)[0]),t}))}),[R]);return[r,{push:n,insert:f,remove:E,swap:D,move:T}]},exports.useForm=function(e){var r=(e=void 0===e?{}:e).id,n=e.defaultValues;n=void 0===n?{}:n;var l=e.validate,v=e.validateOnChange,h=void 0===v||v,k=void 0===(v=e.validateOnBlur)||v,L=void 0===(v=e.focusOnError)||v,M=void 0===(v=e.removeOnUnmounted)||v,U=void 0===(v=e.builtInValidationMode)?"message":v;v=void 0===(v=e.excludeFields)?[]:v;var I=e.onReset,B=e.onSubmit,_=e.onError;e=e.onStateChange;var X=t.useRef({}),z=t.useRef(),G=t.useRef(),H=t.useRef(new Map),J=t.useRef({}),K=t.useRef({}),Q=t.useRef({}),Y=s(l),Z=t.useRef({}),$=t.useRef(),ee=t.useRef(f(v)),re=s(I||function(){}),te=s(B||function(){}),ue=s(_||function(){}),ne=t.useRef(!1),ae=t.useRef({values:n,touched:{},errors:{},isDirty:!1,dirty:{},isValidating:!1,isValid:!0,isSubmitting:!1,isSubmitted:!1,submitCount:0}),ie=(e=function(e,r){var n=t.useReducer((function(e){return e+1}),0)[1],a=t.useRef(e),i=t.useRef([{usedState:{},notify:n}]),c=s(r||function(){});return e=t.useCallback((function(e,r,t){var n=void 0===t?{}:t;t=n.fieldPath;var l=n.shouldSkipUpdate,s=n.shouldForceUpdate;if(n=e.split(".")[0]){if("values"!==e&&"values"===n||!u.dequal(C(a.current,e),r)){var f=N(a.current,e,r,!0),d=f.errors,v=f.dirty,h=f.isDirty,y=f.isValid,b=f.submitCount,m=f.submitCount,p="dirty"===n?A(v):h,g="errors"===n?D(d):y,k="isSubmitting"===n&&r?m+=1:m;a.current=o.default({},f,{isDirty:p,isValid:g,submitCount:k}),c.current(a.current),l||(e=t||e,i.current.forEach((function(r){var t=r.usedState;return r=r.notify,(s||Object.keys(t).some((function(r){return e.startsWith(r)||r.startsWith(e)}))||t.isDirty&&p!==h||t.isValid&&g!==y||t.submitCount&&k!==b)&&r(a.current)})))}}else u.dequal(a.current,r)||(a.current=r,c.current(a.current),i.current.forEach((function(e){var r=e.notify;return!D(e.usedState)&&r(a.current)})))}),[c]),{stateRef:a,setStateRef:e,observersRef:i}}(o.default({},ae.current),e)).stateRef,oe=e.setStateRef,ce=e.observersRef,le=t.useCallback((function(e,r){var t=e.split("."),u=t.shift();oe(u,P(ie.current[u],t.join("."),!0),o.default({fieldPath:e},r))}),[oe,ie]),se=t.useCallback((function(e){var r,t,u=(null==(r=H.current.get(e))?void 0:r.field)||(null==(t=H.current.get(Array.from(H.current.keys()).find((function(r){return r.startsWith(e)}))||""))?void 0:t.field);u&&V(u.focus)&&u.focus()}),[]),fe=t.useCallback((function(e){return Array.from(e.querySelectorAll("input,textarea,select")).filter((function(e){var r=e.name,t=e.id,u=e.classList,n=e.dataset.rcfExclude,a=ee.current;return!(/button|image|submit|reset/.test(e.type)||t&&a["#"+t]||Array.from(u).find((function(e){return a["."+e]})))&&(!("true"!==n&&!r)&&(Q.current[r]||"true"!==n&&!a[r]))})).reduce((function(e,r){var t,u=r.name,n=T(K.current,u);return n&&(K.current[n].fields[u]=!0),e.set(u,o.default({},e.get(u),{field:(null==(t=e.get(u))?void 0:t.field)||r})),R(r)||w(r)?e.get(u).options=e.get(u).options?[].concat(e.get(u).options,[r]):[r]:(function(e){return"select-one"===e.type}(r)||j(r))&&(e.get(u).options=Array.from(r.options)),e}),new Map)}),[]),de=t.useCallback((function(e,r){var t;if(void 0===r&&(r=H.current),r.has(e)){var u=r.get(e);if(r=u.field,u=u.options,function(e){return"INPUT"===e.tagName}(r)){var n,a;if(null!=(n=J.current[e])&&n.valueAsNumber)return r.valueAsNumber;if(null!=(a=J.current[e])&&a.valueAsDate)return r.valueAsDate}return function(e){return"number"===e.type}(r)||function(e){return"range"===e.type}(r)?r.valueAsNumber||"":R(r)?1<u.length?u.filter((function(e){return e.checked})).map((function(e){return e.value})):(e=u[0]).hasAttribute("value")&&e.value?e.checked?[e.value]:[]:e.checked:w(r)?(null==(t=u.find((function(e){return e.checked})))?void 0:t.value)||"":j(r)?u.filter((function(e){return e.selected})).map((function(e){return e.value})):F(r)?r.files:r.value}}),[]),ve=t.useCallback((function(e,r,t){void 0===t&&(t=H.current),t.has(e)&&!Q.current[e]&&(e=(t=t.get(e)).field,t=t.options,R(e)?1<t.length?t.forEach((function(e){e.checked=Array.isArray(r)?r.includes(e.value):!!r})):t[0].checked=!!r:w(e)?t.forEach((function(e){e.checked=e.value===r})):j(e)&&Array.isArray(r)?t.forEach((function(e){e.selected=!!r.includes(e.value)})):F(e)?(d(r)&&(e.files=r),r||(e.value="")):e.value=null!=r?r:"")}),[]),he=t.useCallback((function(e,r,t){void 0===t&&(t=!T(K.current,e)||!p(C(ae.current.values,e.split(".")[0]))),t&&(ae.current.values=N(ae.current.values,e,r,!0)),u.dequal(C(ie.current.values,e),r)||oe("values."+e,r,{shouldSkipUpdate:!0})}),[oe,ie]),ye=t.useCallback((function(e,r){var t=(r=void 0===r?{}:r).shouldSetValues,u=void 0===t||t;return(void 0===(r=r.fields)?Array.from(H.current.keys()):r).forEach((function(r){if(!Q.current[r]){var t=C(e,r);p(t)||ve(r,t),u&&he(r,p(t)?de(r):t)}}))}),[de,he,ve]),be=t.useCallback((function(e,r){(r=V(r)?r(C(ie.current.errors,e)):r)?oe("errors."+e,r):le("errors."+e)}),[le,oe,ie]),me=t.useCallback((function(e){e?Array.isArray(e)?e.forEach((function(e){return be(e)})):be(e):oe("errors",{})}),[be,oe]),pe=t.useCallback((function(e){if(!1!==U&&H.current.has(e)){var r=H.current.get(e).field;if(e=r.validity,r=r.validationMessage,"state"===U)for(var t in e)if("valid"!==t&&e[t])return t;return r}}),[U]),ge=t.useCallback((function(){return!1===U?{}:Array.from(H.current.keys()).reduce((function(e,r){var t=pe(r);return o.default({},e,t?N(e,r,t):{})}),{})}),[U,pe]),ke=t.useCallback((async function(e){var r=C(ie.current.values,e);if(Z.current[e]&&!p(r))try{return await Z.current[e](r,ie.current.values)}catch(e){throw e}}),[ie]),Ce=t.useCallback((function(){var e=Object.keys(Z.current).map((function(e){return ke(e)}));return Promise.all(e).then((function(e){return Object.keys(Z.current).reduce((function(r,t,u){return o.default({},r,e[u]?N(r,t,e[u]):{})}),{})}))}),[ke]),Ae=t.useCallback((async function(e){if(!Y.current)return e?void 0:{};try{var r=await Y.current(ie.current.values);return e?C(r,e):b(r)?r:{}}catch(e){throw e}}),[Y,ie]),Ee=t.useCallback((async function(e){var r=S(Y.current)||S(Z.current[e]);r&&oe("isValidating",!0);try{var t=await Ae(e)||await ke(e)||pe(e);return be(e,t),r&&oe("isValidating",!1),t}catch(e){return e}}),[Y,pe,ke,Ae,be,oe]),Ve=t.useCallback((function(e){return function(e){return(window.requestIdleCallback||function(e){var r=Date.now();return setTimeout((function(){return e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-r))}})}),1)})(e,{timeout:2e3})}((function(){return Ee(e)}))}),[Ee]),Se=t.useCallback((function(){return oe("isValidating",!0),Promise.all([ge(),Ce(),Ae()]).then((function(e){return e=m.apply(void 0,e),oe("errors",e),oe("isValidating",!1),e}))}),[ge,Ce,Ae,oe]),Re=t.useCallback((function(e,r){var t=void 0===(r=(void 0===r?{}:r).shouldFocus)?L:r,u=[];return t&&(u=Array.isArray(t)?t:Array.from(H.current.keys()),u=V(t)?t(u):u),e?Array.isArray(e)?Promise.all(e.map((function(e){return Ee(e)}))).then((function(r){if(t){var n=u.find((function(t){return!!r[e.indexOf(t)]}));n&&se(n)}return!y(r).length})):Ee(e).then((function(r){return t&&r&&u.includes(e)&&se(e),!r})):Se().then((function(e){if(t){var r=u.find((function(r){return C(e,r)}));r&&se(r)}return D(e)}))}),[se,Ee,Se]),De=t.useCallback((function(e,r){var t=(r=void 0===r?{}:r).errorWithTouched,u=r.defaultValues,n=void 0===u?{}:u,a=void 0===(u=r.methodName)?"getState":u;r=r.callback;var i={};return e=x(e,ie.current,(function(e){return e=E(e),"getState"!==a&&("values"!==e||"useFormStateCallback"===a||ne.current||(ne.current=!0),i[e]=!0),e}),(function(e,r){return"getState"===a?r:e.startsWith("values")?p(r)?(e=e.replace("values.",""),r=C(ae.current,e),p(r)?C(n,e):r):r:t&&e.startsWith("errors")?(e=e.replace("errors","touched"),i[e]=!0,g(r,C(ie.current,e))):r}),"getState"===a),r&&r(i),e}),[ie]),Te=t.useCallback((function(e,r){p(r)?se(e):setTimeout((function(){return se(e)}),r)}),[se]);e=t.useCallback((function(e,r){return De(e,{errorWithTouched:(r=void 0===r?{}:r).errorWithTouched,defaultValues:r.defaultValues,methodName:"use",callback:function(e){ce.current[0].usedState=o.default({},ce.current[0].usedState,e)}})}),[De,ce]);var Oe=t.useCallback((function(e){return De(e)}),[De]),Fe=t.useCallback((function(e,r,t){void 0===r&&(r=!0),t=void 0===(t=(void 0===t?{}:t).shouldValidate)?k:t,r?oe("touched."+e,!0):le("touched."+e),t&&Ve(e)}),[le,oe,Ve,k]),we=t.useCallback((function(e){return Fe(e,!0,{shouldValidate:h?e!==$.current:void 0})}),[Fe,h]),je=t.useCallback((function(e,r){void 0===r&&(r=!0),r?oe("dirty."+e,!0):le("dirty."+e)}),[le,oe]),xe=t.useCallback((function(e){return je(e,!u.dequal(C(ie.current.values,e),C(ae.current.values,e)))}),[je,ie]),Ne=t.useCallback((function(e,r,t){var u=void 0===t?{}:t;t=void 0===(t=u.shouldValidate)?h:t;var n=u.shouldTouched;n=void 0===n||n,u=void 0===(u=u.shouldDirty)||u,r=V(r)?r(C(ie.current.values,e)):r,p(r)?le("values."+e):oe("values."+e,r),ve(e,r),T(K.current,e,(function(e){return K.current[e].reset()})),n&&Fe(e,!0,{shouldValidate:!1}),u&&xe(e),t&&Ve(e)}),[le,xe,ve,oe,Fe,ie,Ve,h]),Le=t.useCallback((function(){return{getState:Oe,setValue:Ne,setTouched:Fe,setDirty:je,setError:be,clearErrors:me,runValidation:Re,removeField:Ue,focus:Te,reset:Pe,submit:We}}),[]),Pe=t.useCallback((function(e,r,t){null!=t&&t.preventDefault&&t.preventDefault(),null!=t&&t.stopPropagation&&t.stopPropagation();var u=o.default({},ie.current),n=f(r||[]);Object.keys(u).forEach((function(r){if(!n[r])if("values"===r){var t=(V(e)?e(ie.current.values):e)||ae.current.values;u[r]=t,ae.current.values=t,ye(t,{shouldSetValues:!1,fields:Array.from(H.current.keys()).filter((function(e){return!T(K.current,e)}))})}else u[r]=ae.current[r]})),oe("",u),re.current(u.values,Le(),t),Object.values(K.current).forEach((function(e){return e.reset()}))}),[Le,re,ye,oe,ie]),We=t.useCallback((async function(e){null!=e&&e.preventDefault&&e.preventDefault(),null!=e&&e.stopPropagation&&e.stopPropagation();var r=[].concat(Array.from(H.current.keys()),Object.keys(Q.current)).reduce((function(e,r){return N(e,r,!0,!0)}),ie.current.touched);oe("touched",r),oe("isSubmitted",!1),oe("isSubmitting",!0);try{if(!await Re()){var t=ie.current.errors;return ue.current(t,Le(),e),{errors:t}}return await te.current(ie.current.values,Le(),e),oe("isSubmitted",!0),{values:ie.current.values}}catch(e){throw e}finally{oe("isSubmitting",!1)}}),[Le,ue,te,Re,oe,ie]),qe=t.useCallback((function(e,r){oe("values."+e,r),xe(e),h&&Ve(e)}),[xe,oe,Ve,h]),Me=t.useCallback((function(e){if(!M)return!1;var r=Array.isArray(M)?M:[].concat(Array.from(H.current.keys()),Object.keys(Q.current),Object.keys(K.current));return(r=V(M)?M(r):r).includes(e)}),[]),Ue=t.useCallback((function(e,r){var t=(r=f(r||[],{value:"values",error:"errors"})).defaultValue,u=i.default(r,W);t||(ae.current.values=P(ae.current.values,e,!0)),["values","touched","dirty","errors"].forEach((function(r,t,n){t=t===n.length-1,u[r]||p(C(ie.current[r],e))||le(r+"."+e,{shouldSkipUpdate:!t,shouldForceUpdate:t})})),delete J.current[e],delete Z.current[e],delete K.current[e],delete Q.current[e],H.current.has(e)&&H.current.delete(e)}),[le,ie]);return n=t.useCallback((function(e){if(e){G.current=e;var r=G.current;H.current=fe(r),ye(ae.current.values),X.current.change=function(e){if(e=e.target.name,H.current.has(e)&&!Q.current[e]){var r,t=null==(r=J.current[e])?void 0:r.parse;r=de(e),qe(e,t?t(r):r),$.current=e}},X.current.blur=function(e){e=e.target,O(e)&&(e=e.name,H.current.has(e)&&!Q.current[e]&&(we(e),$.current=void 0))},X.current.submit=function(e){return We(e)},X.current.reset=function(e){return Pe(null,null,e)},r.addEventListener("input",X.current.change),r.addEventListener("focusout",X.current.blur),r.addEventListener("submit",X.current.submit),r.addEventListener("reset",X.current.reset),z.current=new MutationObserver((function(e){if("childList"===e[0].type){var t=fe(r),u=ae.current.values;H.current.forEach((function(e,r){var n,a,i;Me(r)&&!Q.current[r]&&(t.has(r)?(e=null==(n=H.current.get(r))||null==(a=n.options)?void 0:a.length)>(n=null==(i=t.get(r).options)?void 0:i.length)?oe("values."+r,de(r,t),{shouldSkipUpdate:!0}):e<n&&ve(r,C(u,r),t):Ue(r,!T(K.current,r)||p(C(ae.current.values,r.split(".")[0]))?void 0:["defaultValue"]))}));var n=[];t.forEach((function(e,r){H.current.has(r)||Q.current[r]||(e=C(ie.current.values,r),p(e)||(u=N(u,r,e,!0)),n.push(r))})),H.current=t,n.length&&ye(u,{fields:n})}})),z.current.observe(r,{childList:!0,subtree:!0})}}),[fe,de,qe,Ue,Pe,ve,ye,oe,we,Me,ie,We]),l=t.useCallback((function(e){return function(r){if(null!=r&&r.name&&!Q.current[r.name]&&!ee.current[r.name])if(V(e))Z.current[r.name]=e;else{var t=e.validate,u=i.default(e,q);t&&(Z.current[r.name]=t),J.current[r.name]=u}}}),[]),function(e,r){e?c[e]=r:a=r}(r,{validateOnChange:h,shouldRemoveField:Me,initialStateRef:ae,fieldArrayRef:K,controlsRef:Q,observersRef:ce,fieldValidatorsRef:Z,changedFieldRef:$,setStateRef:oe,getNodeValue:de,getFormState:De,setDefaultValue:he,setNodesOrValues:ye,setTouchedMaybeValidate:we,handleChangeEvent:qe,removeField:Ue,form:n,field:l,focus:Te,use:e,getState:Oe,setValue:Ne,setTouched:Fe,setDirty:je,setError:be,clearErrors:me,runValidation:Re,reset:Pe,submit:We}),t.useEffect((function(){return function(){if(G.current){var e,t=X.current;G.current.removeEventListener("input",t.change),G.current.removeEventListener("focusout",t.blur),G.current.removeEventListener("submit",t.submit),G.current.removeEventListener("reset",t.reset),null==(e=z.current)||e.disconnect()}!function(e){e?delete c[e]:a=void 0}(r)}}),[r]),{form:n,field:l,focus:Te,removeField:Ue,use:e,getState:Oe,setValue:Ne,setTouched:Fe,setDirty:je,setError:be,clearErrors:me,runValidation:Re,reset:Pe,submit:We}},exports.useFormMethods=function(e){return{form:(e=l(e)).form,field:e.field,focus:e.focus,removeField:e.removeField,use:e.use,getState:e.getState,setValue:e.setValue,setTouched:e.setTouched,setDirty:e.setDirty,setError:e.setError,clearErrors:e.clearErrors,runValidation:e.runValidation,reset:e.reset,submit:e.submit}},exports.useFormState=M;
//# sourceMappingURL=index.cjs.production.min.js.map
